{"name":"GoogleOauth2component","tagline":"Oauth 2.0 Component for CakePHP Project - Requires the Google_Client and Google_Oauth2Service client libraries","body":"<!--\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2014 Uchenna Chilaka\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n-->\r\n<div style='font-family: Arial, Helvetica, sans-serif'>\r\n<h1>DISCLAIMER</h1>\r\n  <p>  This work is put on here to assist anyone working with CakePHP projects and needing a wrapper class for the Google OAuth 2.0 library. It is provided AS-IS. \r\n  </p>\r\n<h1>PLUGIN VS. COMPONENT</h1>\r\n<p> There are cases when it is best to use a plugin in CakePHP, and other cases where it works out to use a component. Depending on \r\n  your preferences, you could swing in either direction - this component provides functionality that some might see better fit for \r\n  a plugin - and there might be a plugin version in the future. For now - quick and dirty!\r\n  </p>\r\n<h1>REQUIREMENTS</h1>\r\n<p> This component requires the following libraries:\r\n  </p>\r\n<p>CakePHP - Your application should be based on the CakePHP Framework. You can download the framework code at <a href=\"http://cakephp.org/\" title=\"CakePHP Website\" target=\"_blank\">http://cakephp.org/</a>.</p>\r\n<p>A working knowledge of coding with CakePHP. The CakePHP documentation can be found here: <a href=\"http://book.cakephp.org/2.0/en/index.html\" target=\"_blank\">http://book.cakephp.org/2.0/en/index.html</a></p>\r\n<p>A Google Console Project with OAuth credentials. To setup your google console project, visit <a href=\"http://cloud.google.com\" target=\"_blank\">http://cloud.google.com</a>.</p>\r\n<p>The Google_Oauth2Service class, available in the <a href=\"https://code.google.com/p/google-api-php-client/\" target=\"_blank\">Google API Client Library for PHP</a> library\r\n    </p>\r\n<p>The Google_Client class, also available in the <a href=\"https://code.google.com/p/google-api-php-client/\" target=\"_blank\">Google API Client Library for PHP</a> library</p>\r\n<h1>INSTALLATION</h1>\r\n<p>Copy the component to your <span class=\"code\">/&lt;Application Root&gt;/app/Controller/Component/</span> directory, or any other directory bootstrapped to search for components.</p>\r\n<p>Replace the paths to both the Google_Oauth2Service and Google_Client class files with the correct path on your server - e.g. <span class='code'>/var/www/libraries/google/google-api-client/src/contrib/&lt;ClassFile&gt;</span> assuming that is where you have the Google API library installed on your server</p>\r\n<p>That's it! You're ready to start using the component within your CakePHP controllers.            </p>\r\n<h1>USING THE COMPONENT</h1>\r\n<p>Include the component name in your $components array </p>\r\n<ul>\r\n  \r\n  <section class='code'>\r\n    public $components = array('GoogleOauth2');\r\n    </section>\r\n  </ul>\r\n  <p>Next, use the <a href='#connect'><span class='fxn'>connect()</span></a> method to initialize the component when you are ready to attempt authentication against Google ID. See the method reference <a href='#connect'>below</a> for accepted arguments.</p>\r\n  <h2>LOADING COMPONENTS ON THE FLY</h2>\r\n\r\n  <p>You can load the component on the fly in your CakePHP application using the following syntax:</p>\r\n  <p class=\"code\">$this-&gt;GoogleAuth = $this-&gt;Components-&gt;load('GoogleOauth2');              \r\n  </p>\r\n<h1>FUNCTIONS</h1>\r\n  <blockquote>\r\n    <h3 id='connect'><span class='fxn'>connect</span>($controller, $config, $scopes, $api_mode)</h3>\r\n    <p>    This method is most likey\r\n      be well used within your project. It initializes your authentication attempt againt the user's Google ID, and accepts the following arguments:\r\n    </p>\r\n    <blockquote>\r\n      <p><span class='var'><strong>controller</strong></span>: Use the $this variable to pass your controller into the component for controller-level callbacks</p>\r\n      <p><strong>config</strong>: This is an associative array with the following parameters: </p>\r\n      <blockquote>\r\n        <p><span class='var'><strong>client_id</strong></span>: Your Google API client ID</p>\r\n        <p><span class='var'><strong>client_secret</strong></span>: Your Google API secret</p>\r\n        <p><span class='var'>redirect_url</span>: Your success redirect url once the authentication action is completed. This url MUST be included in the list of accepted callbacks in your google console</p>\r\n      </blockquote>\r\n      <p><span class='var'><strong>scopes</strong></span>: This is an array of Google API scopes. These scopes are in url format. A typical array of scopes will look like this:   \r\n      </p>\r\n      <blockquote class=\"code\">      $scopes = array('https://www.googleapis.com/auth/userinfo.email',\r\n        'https://www.googleapis.com/auth/userinfo.profile',\r\n        'https://www.googleapis.com/auth/drive', \r\n        'https://www.googleapis.com/auth/drive.file');</blockquote>\r\n      <p>      The <em>email</em> and <em>profile</em> scopes are required for this component.\r\n      </p>\r\n      <p><span class='var'><strong>api_mode</strong></span>: This is a boolean variable. If set to true, the component will return an associative array with a <em>success</em> index that indicates whether the auth attempt was successful or not. This will be useful if you are authenticating via an API and would like to parse the associate array to a JSON string (for instance) instead of the auto-redirect action.</p>\r\n    </blockquote>\r\n    <h3 id='IsReady'><span class='fxn'>isReady</span>()</h3>\r\n    <p>    This returns true or false after a <a href='#connect'><span class='fxn'>connect</span>()</a> call for a success or failure to authenticate. \r\n    </p>\r\n    <h3 id='getAuthUrl'><span class='fxn'>getAuthUrl</span>()</h3>\r\n    <p>    Returns the authentication Url against Google's OAuth API. Is useful if you are handling redirection manually. In this case, the <em>api_mode<em> variable of your <a href='#connect'><span class='fxn'>connect</span>()</a> function can\r\n      come in handy to turn off the auto-redirect when authentication is needed.</p>\r\n    <h3 id='getUser'><span class='fxn'>getUser</span>()</h3>\r\n    <p>    Will return an associate array of the session user data.\r\n    </p>\r\n    <h3 id='getUserId'><span class='fxn'>getUserId</span>()</h3>\r\n    <p>    Will return the Google User ID from the session user array.\r\n    </p>\r\n    <h3 id='cleanUser'><span class='fxn'>cleanUser</span>()</h3>\r\n    <p>    Useful for logging out. Call in your <em>logout()</em> controller function to delete the google user data from the session.\r\n    </p>\r\n    <h3 id='getTokens'><span class='fxn'>getTokens</span>()</h3>\r\n    <p>    Returns a JSON string of the tokens returned on successful authentication and stored in the session array.\r\n    </p>\r\n  </blockquote>\r\n<h1 id='QA'>QUESTIONS?</h1>\r\n<p> Reach out @ <a href=\"https://twitter.com/uchechilaka\" title=\"WebsiteInAPage on Twitter\" target=\"_blank\">https://twitter.com/websiteinapage</a>. I'll do my best to respond in a timely fasion. \r\n    </p>\r\n</div>\r\n","google":"UA-47459054-1","note":"Don't delete this file! It's used internally to help with page regeneration."}